########################################################################
#
# The contents of this file are subject to the AAF SDK Public
# Source License Agreement (the "License"); You may not use this file
# except in compliance with the License.  The License is available in
# AAFSDKPSL.TXT, or you may obtain a copy of the License from the AAF
# Association or its successor.
#
# Software distributed under the License is distributed on an "AS IS"
# basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See
# the License for the specific language governing rights and limitations
# under the License.
#
# The Original Code of this file is Copyright 1998-2001, Licensor of the
# AAF Association.
#
# The Initial Developer of the Original Code of this file and the
# Licensor of the AAF Association is Avid Technology.
# All rights reserved.
#
########################################################################

#
# Script: rm
# proxy for unix rm command.
#

#
# This variable will contain a list of the files to delete.
set filesToDelete ""

#
# This variable will be set to "Yes" if the "-p" option is used.
set printProgress 0


# 
# This variable is set to "Yes" if the "-f" option is used in the
# parameter list.
set deleteReadOnly 0

set oldParameters "{parameters}"

#
# Check the parameter list for options. If a parameter is not an option
# then it assumed to be a file path.
#
loop
	if "{1}" =~ /-[A-Za-z]+/
		if "{1}" == "-f"
			set deleteReadOnly 1
		else if "{1}" == "-i"
			set deleteReadOnly 0
		else if "{1}" == "-p"
			set printProgress 1
		else if "{1}" == "-v"
			set printProgress 1
		else
			echo '# Parameter "'{1}'" is an unknown or unsupported option for the '{0}' command.'
			exit
		end
	else
		set filesToDelete "{filesToDelete} '{1}'"
	end
	
	# continue processing parameters if necessary...
	shift
	break if "{1}" == ""
end


for theFile in {filesToDelete}
	if "`exists "{theFile}"`"
		if {deleteReadOnly}
			SetFile -a l "{theFile}"
		end
		Delete -i -ay "{theFile}"
		if {printProgress}
			echo '"'{theFile}'" deleted.'
		end
	end
end