#
# Script: rm
# proxy for unix rm command.
#

#
# This variable will contain a list of the files to delete.
set filesToDelete ""

#
# This variable will be set to "Yes" if the "-p" option is used.
set printProgress ""


# 
# This variable is set to "Yes" if the "-f" option is used in the
# parameter list.
set deleteReadOnly 0

set oldParameters "{parameters}"

#
# Check the parameter list for options. If a parameter is not an option
# then it assumed to be a file path.
#
loop
	if "{1}" =~ /-[A-Za-z]+/
		if "{1}" == "-f"
			set deleteReadOnly 1
		else if "{1}" == "-i"
			set deleteReadOnly 0
		else if "{1}" == "-p"
			set printProgress "{1}"
		else if "{1}" == "-v"
			set printProgress "-p"
		else
			echo '# Parameter "'{1}'" is an unknown or unsupported option for the '{0}' command.'
			exit
		end
	else
		set filesToDelete "{filesToDelete} '{1}'"
	end
	
	# continue processing parameters if necessary...
	shift
	break if "{1}" == ""
end

if "{printProgress}" == "Yes" 
	echo '# Calling "'{0}' '{oldParameters}'"'
end


for theFile in {filesToDelete}
	if {deleteReadOnly}
		if "`exists "{theFile}"`"
			SetFile -a l "{theFile}"
		end
	end
	Delete -i -ay "{printProgress}" "{theFile}"
end