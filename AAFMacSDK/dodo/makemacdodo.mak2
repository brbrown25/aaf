# This partial make file is to be included by makemacdodo.mak1
#   File:       makemacdodo.mak2
#   Target:     {refh}AAF.h, {refh}AAFPlugin.h, {refh}AAF_i.c, {refh}AAFPlugin_i.c
#   Sources:    all frefh files
#

MAKEMACDODO2 = #"{macdodo}makemacdodo.mak2"

"{dod}AAF.refh" Ä "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" {GENERATED_FREFH}
	( echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// AAF Interfaces." ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo '#ifndef __AAF_h__' ; ¶
	  echo '#define __AAF_h__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef __AAFCOMPlatform_h__' ; ¶
	  echo '#include "AAFCOMPlatform.h"' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifndef __AAFTypes_h__' ; ¶
	  echo '#include "AAFTypes.h"' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  for class in {AAFOBJECTS} {AAFCOMINTERFACESONLY} ; ¶
	      echo "interface I{class};" ; ¶
	  end ; ¶
	  echo '#else' ; ¶
	  for class in {AAFOBJECTS} {AAFCOMINTERFACESONLY} ; ¶
	      echo "typedef interface I{class} I{class};" ; ¶
	  end ; ¶
	  echo '#endif' ; ¶
	  for class in {AAFOBJECTS} {AAFCOMINTERFACESONLY} ; ¶
	      echo "" ; ¶
	      echo "// I{class}" ; ¶
	      echo "" ; ¶
	      catenate {class}.frefh ; ¶
	  end ; ¶
	  echo "" ; ¶
	  echo "" ; ¶
	  echo "" ; ¶
	  catenate AAFModule.frefh; ¶
	  echo "" ; ¶
	  echo '#endif // __AAF_h__' ; ¶
	) > "{dod}AAF.h.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAF.h.tmp"
	Rename -y "{dod}AAF.h.tmp" "{dod}AAF.refh"

"{refh}AAF.h" Ä "{dod}AAF.refh"
	copy_if_diff -p "{dod}AAF.refh" "{refh}AAF.h"
	

"{dod}AAFPrivate.refh" Ä "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" {GENERATED_PRIVATE_FREFH}
	( echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// Private AAF Interfaces." ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo '#ifndef __AAFPrivate_h__' ; ¶
	  echo '#define __AAFPrivate_h__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef __AAF_h__' ; ¶
	  echo '#include "AAF.h"' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  for class in AAFRoot {PRIVATE_AAFOBJECTS} ; ¶
	      echo "interface I{class};" ; ¶
	  end ; ¶
	  echo '#else' ; ¶
	  for class in AAFRoot {PRIVATE_AAFOBJECTS} ; ¶
	      echo "typedef interface I{class} I{class};" ; ¶
	  end ; ¶
	  echo '#endif' ; ¶
	  for class in AAFRoot {PRIVATE_AAFOBJECTS} ; ¶
	      echo "" ; ¶
	      echo "// I{class}" ; ¶
	      echo "" ; ¶
	      catenate {class}.frefh ; ¶
	  end ; ¶
	  echo "" ; ¶
	  echo '#endif // __AAFPrivate_h__' ; ¶
	) > "{dod}AAFPrivate.h.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFPrivate.h.tmp"
	Rename -y "{dod}AAFPrivate.h.tmp" "{dod}AAFPrivate.refh"

"{refh}AAFPrivate.h" Ä "{dod}AAFPrivate.refh"
	copy_if_diff -p "{dod}AAFPrivate.refh" "{refh}AAFPrivate.h"


"{dod}AAFPlugin.refh" Ä "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" {PLUGIN_FREFH_TARGETS}
	( echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// AAF Plugin Interfaces." ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo '#ifndef __AAFPlugin_h__' ; ¶
	  echo '#define __AAFPlugin_h__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef __AAF_h__' ; ¶
	  echo '#include "AAF.h"' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifndef __AAFPluginTypes_h__' ; ¶
	  echo '#include "AAFPluginTypes.h"' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  for class in {PLUGIN_OBJECTS} ; ¶
	    	echo 'interface I'{class}';'; ¶
	  end ; ¶
	  echo '#else' ; ¶
	  for class in {PLUGIN_OBJECTS} ; ¶
	      echo 'typedef interface I'{class}' I'{class}';'; ¶
	  end ; ¶
	  echo '#endif' ; ¶
	  for class in {PLUGIN_OBJECTS} ; ¶
	      echo "" ; ¶
	      echo "// I{class}" ; ¶
	      echo "" ; ¶
	      catenate {class}.frefh ; ¶
	  end ; ¶
	  echo "" ; ¶
	  echo '#endif // __AAFPlugin_h__' ; ¶
	) > "{dod}AAFPlugin.h.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFPlugin.h.tmp"
	Rename -y "{dod}AAFPlugin.h.tmp" "{dod}AAFPlugin.refh"

"{refh}AAFPlugin.h" Ä "{dod}AAFPlugin.refh"
	copy_if_diff -p "{dod}AAFPlugin.refh" "{refh}AAFPlugin.h"


"{dod}AAF_i.refh" Ä "{dod}dod2iid.pl" "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" {GENERATED_FREFH}
	( echo "/* this file contains the actual definitions of */" ; ¶
	  echo "/* the IIDs and CLSIDs */" ; ¶
	  echo "" ; ¶
	  echo "/* link this file in with the server and any clients */" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// Definitions for all of the public IID needed by an AAF SDK client" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo "" ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  echo 'extern "C"{' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo "" ; ¶
	  echo '#ifndef __IID_DEFINED__' ; ¶
	  echo '#define __IID_DEFINED__' ; ¶
	  echo "" ; ¶
	  echo "typedef struct _IID" ; ¶
	  echo '{' ; ¶
	  echo "    unsigned long x;" ; ¶
	  echo "    unsigned short s1;" ; ¶
	  echo "    unsigned short s2;" ; ¶
	  echo "    unsigned char  c[8];" ; ¶
	  echo "} IID;" ; ¶
	  echo "" ; ¶
	  echo '#endif // __IID_DEFINED__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef CLSID_DEFINED' ; ¶
	  echo '#define CLSID_DEFINED' ; ¶
	  echo "typedef IID CLSID;" ; ¶
	  echo '#endif // CLSID_DEFINED' ; ¶
	  echo "" ; ¶
	  perl dod2iid.pl {AAFOBJECTS} {AAFCOMINTERFACESONLY} ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  echo "}" ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	) > "{dod}AAF_i.c.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAF_i.c.tmp"
	Rename -y "{dod}AAF_i.c.tmp" "{dod}AAF_i.refh"

"{refh}AAF_i.c" Ä "{dod}AAF_i.refh"
	copy_if_diff -p "{dod}AAF_i.refh" "{refh}AAF_i.c"


"{dod}AAFPlugin_i.refh" Ä "{dod}dod2iid.pl" "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" {PLUGIN_FREFH_TARGETS}
	( echo "/* this file contains the actual definitions of */" ; ¶
	  echo "/* the IIDs and CLSIDs */" ; ¶
	  echo "" ; ¶
	  echo "/* link this file in with the server and any clients */" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// Definitions for all public IID's needed by an AAF SDK Plugin author" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo "" ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  echo 'extern "C"{' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo "" ; ¶
	  echo '#ifndef __IID_DEFINED__' ; ¶
	  echo '#define __IID_DEFINED__' ; ¶
	  echo "" ; ¶
	  echo "typedef struct _IID" ; ¶
	  echo '{' ; ¶
	  echo "    unsigned long x;" ; ¶
	  echo "    unsigned short s1;" ; ¶
	  echo "    unsigned short s2;" ; ¶
	  echo "    unsigned char  c[8];" ; ¶
	  echo "} IID;" ; ¶
	  echo "" ; ¶
	  echo '#endif // __IID_DEFINED__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef CLSID_DEFINED' ; ¶
	  echo '#define CLSID_DEFINED' ; ¶
	  echo "typedef IID CLSID;" ; ¶
	  echo '#endif // CLSID_DEFINED' ; ¶
	  echo "" ; ¶
	  perl dod2iid.pl {PLUGIN_OBJECTS} ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  echo "}" ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	) > "{dod}AAFPlugin_i.c.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFPlugin_i.c.tmp"
	Rename -y "{dod}AAFPlugin_i.c.tmp" "{dod}AAFPlugin_i.refh"

"{refh}AAFPlugin_i.c" Ä "{dod}AAFPlugin_i.refh"
	copy_if_diff -p "{dod}AAFPlugin_i.refh" "{refh}AAFPlugin_i.c"


"{dod}AAFPrivate_i.refh" Ä "{dod}dod2iid.pl" "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" {GENERATED_PRIVATE_FREFH}
	( echo "/* this file contains the actual definitions of */" ; ¶
	  echo "/* the IIDs and CLSIDs */" ; ¶
	  echo "" ; ¶
	  echo "/* link this file in with the server and any clients */" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// Definitions for all public IID's needed by an AAF SDK Plugin author" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo "" ; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  echo 'extern "C"{' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo "" ; ¶
	  echo '#ifndef __IID_DEFINED__' ; ¶
	  echo '#define __IID_DEFINED__' ; ¶
	  echo "" ; ¶
	  echo "typedef struct _IID" ; ¶
	  echo '{' ; ¶
	  echo "    unsigned long x;" ; ¶
	  echo "    unsigned short s1;" ; ¶
	  echo "    unsigned short s2;" ; ¶
	  echo "    unsigned char  c[8];" ; ¶
	  echo "} IID;" ; ¶
	  echo "" ; ¶
	  echo '#endif // __IID_DEFINED__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef CLSID_DEFINED' ; ¶
	  echo '#define CLSID_DEFINED' ; ¶
	  echo "typedef IID CLSID;" ; ¶
	  echo '#endif // CLSID_DEFINED' ; ¶
	  echo "" ; ¶
	  perl dod2iid.pl AAFRoot {PRIVATE_AAFOBJECTS}; ¶
	  echo '#ifdef __cplusplus' ; ¶
	  echo "}" ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	) > "{dod}AAFPrivate_i.c.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFPrivate_i.c.tmp"
	Rename -y "{dod}AAFPrivate_i.c.tmp" "{dod}AAFPrivate_i.refh"

"{refh}AAFPrivate_i.c" Ä "{dod}AAFPrivate_i.refh"
	copy_if_diff -p "{dod}AAFPrivate_i.refh" "{refh}AAFPrivate_i.c"


"{dod}AAFClassIDs.implh" Ä "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt"
	( echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// Declarations for all of the private AAF code class ids" ; ¶
	  echo "// This file is private to the AAF Reference Implementation." ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo '#ifndef __AAFClassIDs_h__' ; ¶
	  echo '#define __AAFClassIDs_h__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef __AAFTypes_h__' ; ¶
	  echo '#include "AAFTypes.h"' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo "" ; ¶
	  for class in {PRIVATE_AAFOBJECTS} {AAFOBJECTS} ; ¶
	      echo 'extern "C" const aafClassID_t CLSID_'{class}';'; ¶
	  end ; ¶
	  echo "" ; ¶
	  echo '#endif // __AAFClassIDs_h__' ; ¶
	) > "{dod}AAFClassIDs.h.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFClassIDs.h.tmp"
	Rename -y "{dod}AAFClassIDs.h.tmp" "{dod}AAFClassIDs.implh"

"{impl}AAFClassIDs.h" Ä "{dod}AAFClassIDs.implh"
	copy_if_diff -p "{dod}AAFClassIDs.implh" "{impl}AAFClassIDs.h"


"{dod}AAFCLSIDs.comh" Ä "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" 
	( echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// Declarations for all of the private AAF code class ids" ; ¶
	  echo "// This file is private to the AAF Reference Implementation." ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "//" ; ¶
	  echo '#ifndef __AAFCLSIDs_h__' ; ¶
	  echo '#define __AAFCLSIDs_h__' ; ¶
	  echo "" ; ¶
	  echo '#ifndef __AAFCOMPlatformTypes_h__' ; ¶
	  echo '#include "AAFCOMPlatformTypes.h"' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  for class in {PRIVATE_AAFOBJECTS} {AAFOBJECTS} ; ¶
	      echo 'EXTERN_C const CLSID CLSID_'{class}';'; ¶
	  end ; ¶
	  echo "" ; ¶
	  echo '#endif // __AAFCLSIDs_h__' ; ¶
	) > "{dod}AAFCLSIDs.h.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFCLSIDs.h.tmp"
	Rename -y "{dod}AAFCLSIDs.h.tmp" "{dod}AAFCLSIDs.comh"

"{comh}AAFCLSIDs.h" Ä "{dod}AAFCLSIDs.comh"
	copy_if_diff -p "{dod}AAFCLSIDs.comh" "{comh}AAFCLSIDs.h"


"{dod}AAFObjectTable.comh" Ä "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" 
	( echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "// This file contains invocations of the macros described below." ; ¶
	  echo "//" ; ¶
	  echo "// To use this file -" ; ¶
	  echo "//   1. #define the macros to suit your usage" ; ¶
	  echo "//   2. #include this file" ; ¶
	  echo "//   3. #undef the macros" ; ¶
	  echo "" ; ¶
	  echo "// Default empty definitions so that you only have to define" ; ¶
	  echo "// those macros you actually want to use." ; ¶
	  echo "//" ; ¶
	  echo '#ifndef AAF_BEGIN_OBJECT_MAP' ; ¶
	  echo '#define AAF_BEGIN_OBJECT_MAP(x)' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifndef AAF_END_OBJECT_MAP' ; ¶
	  echo '#define AAF_END_OBJECT_MAP()' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifndef AAF_OBJECT_ENTRY' ; ¶
	  echo '#define AAF_OBJECT_ENTRY(name)' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo '#ifndef AAF_PRIVATE_OBJECT_ENTRY' ; ¶
	  echo '#define AAF_PRIVATE_OBJECT_ENTRY(name)' ; ¶
	  echo '#endif' ; ¶
	  echo "" ; ¶
	  echo "" ; ¶
	  echo "//" ; ¶
	  echo "// Include all objects in the following table:" ; ¶
	  echo "//" ; ¶
	  echo "AAF_BEGIN_OBJECT_MAP(AAFObjectMap)" ; ¶
	  for class in {PRIVATE_AAFOBJECTS} ; 
	      echo '	AAF_PRIVATE_OBJECT_ENTRY('{class}')'; ¶
	  end ; ¶
	  for class in {AAFOBJECTS} ; 
	      echo '	AAF_OBJECT_ENTRY('{class}')'; ¶
	  end ; ¶
	  echo "AAF_END_OBJECT_MAP()" ; ¶
	) > "{dod}AAFObjectTable.h.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFObjectTable.h.tmp"
	Rename -y "{dod}AAFObjectTable.h.tmp" "{dod}AAFObjectTable.comh"

"{comh}AAFObjectTable.h" Ä "{dod}AAFObjectTable.comh"
	copy_if_diff -p "{dod}AAFObjectTable.comh" "{comh}AAFObjectTable.h"


"{dod}AAFObjectTable_i.comh" Ä "{macdodo}macaafobjects.mk" "{MAKEMACDODO2}" "{dod}CopyrightMessage.txt" 
	( echo "//=--------------------------------------------------------------------------=" ; ¶
	  catenate "{dod}CopyrightMessage.txt" ; ¶
	  echo "//=--------------------------------------------------------------------------=" ; ¶
	  echo "" ; ¶
	  echo "//" ; ¶
	  echo "// Include the CLSID declarations..." ; ¶
	  echo "//" ; ¶
	  echo ¶#include ¶"AAFCLSIDs.h¶" ; ¶
	  echo "" ; ¶
	  echo "//" ; ¶
	  echo "// Include the appropriate header files:" ; ¶
	  echo "//" ; ¶
	  for class in {PRIVATE_AAFOBJECTS} ; 
	      echo '#include"C'{class}'.h"' ; ¶
	  end ; ¶
	  for class in {AAFOBJECTS} ; 
	      echo '#include"C'{class}'.h"' ; ¶
	  end ; ¶
	  echo "" ; ¶
	  echo "//" ; ¶
	  echo "// Include Private AAF Objects Table:" ; ¶
	  echo "//" ; ¶
	  echo '#define AAF_PRIVATE_OBJECT_ENTRY(name) AAF_OBJECT_ENTRY(name)' ; ¶
	  echo "//" ; ¶
	  echo "// Include AAF Object Table:" ; ¶
	  echo "//" ; ¶
	  echo ¶#include ¶"AAFObjectTable.h¶" ; ¶
	) > "{dod}AAFObjectTable_i.cpp.tmp"
	SetFile -t TEXT -c CWIE "{dod}AAFObjectTable_i.cpp.tmp"
	Rename -y "{dod}AAFObjectTable_i.cpp.tmp" "{dod}AAFObjectTable_i.comh"

"{comh}AAFObjectTable_i.cpp" Ä "{dod}AAFObjectTable_i.comh"
	copy_if_diff -p "{dod}AAFObjectTable_i.comh" "{comh}AAFObjectTable_i.cpp"

 
"{dod}CAAFEnumValidation.log" ÄÄ "{dod}AAFTypes.dod" "{dod}AAFPluginTypes.dod" "{dod}CAAFEnumValidation.h" "{dod}CAAFEnumValidation.cpp"
	perl GenEnumValidation.pl AAFTypes.dod AAFPluginTypes.dod > CAAFEnumValidation.log
	Set error {Status}
	if {error} == 0
		SetFile -t TEXT -c CWIE CAAFEnumValidation.h
		SetFile -t TEXT -c CWIE CAAFEnumValidation.cpp
	end
	
"{dod}CAAFEnumValidation.h" ÄÄ "{dod}CAAFEnumValidation.log"

"{dod}CAAFEnumValidation.cpp" ÄÄ "{dod}CAAFEnumValidation.log"

"{comh}CAAFEnumValidation.h" Ä "{dod}CAAFEnumValidation.h"
	copy_if_diff -p "{dod}CAAFEnumValidation.h" "{comh}CAAFEnumValidation.h"
	
"{comc}CAAFEnumValidation.cpp" Ä "{dod}CAAFEnumValidation.cpp"
	copy_if_diff -p "{dod}CAAFEnumValidation.cpp" "{comc}CAAFEnumValidation.cpp"

